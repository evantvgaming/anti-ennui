<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Anti-ennui : Ã©cole edition</title>
  <style>
    :root{
      --bg:#0f1226; --panel:#151a3b; --txt:#fff;
      --muted:rgba(255,255,255,.78);
      --shadow:0 8px 30px rgba(0,0,0,.25);
      --round:16px;
    }
    body{font-family:Arial,sans-serif;margin:0;background:var(--bg);color:var(--txt)}
    header{padding:18px 20px;background:var(--panel);position:sticky;top:0;z-index:5;box-shadow:var(--shadow)}
    h1{margin:0;font-size:18px}
    main{padding:18px;max-width:1100px;margin:0 auto}
    .topbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .pill{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.08);font-size:13px;color:var(--muted)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:14px 0}
    .tabbtn{
      border:0;border-radius:999px;padding:10px 12px;cursor:pointer;font-weight:800;
      background:rgba(255,255,255,.10);color:var(--txt)
    }
    .tabbtn.active{background:#60a5fa;color:#081026}
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:880px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:var(--panel);border-radius:var(--round);padding:14px;box-shadow:var(--shadow)}
    .card h2{margin:0 0 6px;font-size:18px}
    .small{font-size:13px;color:var(--muted);line-height:1.4}
    .out{margin-top:10px;padding:12px;background:rgba(255,255,255,.07);border-radius:14px;min-height:22px}
    button.action{
      border:0;border-radius:14px;padding:10px 12px;cursor:pointer;font-weight:900;margin:6px 6px 0 0;
      background:#34d399;color:#061210
    }
    button.alt{background:#f472b6;color:#240612}
    button.alt2{background:#fbbf24;color:#1b1400}
    button.alt3{background:#60a5fa;color:#081026}
    .section{display:none}
    .section.active{display:block}
    a{color:#93c5fd}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .spacer{height:10px}

    /* TicTacToe */
    .ttt{display:grid;grid-template-columns:repeat(3,70px);gap:8px;margin-top:10px}
    .cell{
      width:70px;height:70px;border-radius:16px;
      background:rgba(255,255,255,.08);display:flex;align-items:center;justify-content:center;
      font-size:34px;font-weight:900;cursor:pointer;user-select:none
    }

    /* Bingo */
    .bingo{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:10px}
    .bcell{
      border-radius:16px;background:rgba(255,255,255,.08);
      padding:10px;font-size:13px;min-height:46px;display:flex;align-items:center;justify-content:center;text-align:center;
      cursor:pointer;user-select:none
    }
    .bcell.done{background:rgba(52,211,153,.22)}

    /* Dodge */
    canvas{max-width:100%;border-radius:16px;background:rgba(255,255,255,.08)}

    /* Discret mode */
    body.discret{
      --bg:#f6f7fb; --panel:#ffffff; --txt:#10122a;
      --muted:rgba(16,18,42,.72);
      --shadow:0 3px 12px rgba(0,0,0,.08);
    }
    body.discret .tabbtn.active{color:#fff;background:#111827}
    body.discret .pill{background:rgba(16,18,42,.06)}
  </style>
</head>

<body>
<header>
  <h1>ğŸ’ Anti-ennui (version Ã©cole) â€” â€œMonde rÃ©el saturÃ©, je reload ailleursâ€</h1>
  <div class="topbar">
    <span class="pill">ğŸ•µï¸ Mode survie de cours : ON</span>
    <span class="pill" id="discretPill">ğŸ˜ˆ Discret : OFF</span>
    <button class="action alt2" onclick="toggleDiscret()">Activer / DÃ©sactiver discret</button>
  </div>
</header>

<main>
  <div class="tabs">
    <button class="tabbtn active" data-tab="hub" onclick="openTab('hub')">ğŸ  Hub</button>
    <button class="tabbtn" data-tab="games" onclick="openTab('games')">ğŸ® Jeux</button>
    <button class="tabbtn" data-tab="defis" onclick="openTab('defis')">ğŸ¯ DÃ©fis</button>
    <button class="tabbtn" data-tab="bingo" onclick="openTab('bingo')">ğŸ§¾ Bingo du prof</button>
    <button class="tabbtn" data-tab="quiz" onclick="openTab('quiz')">ğŸ§  Quiz</button>
    <button class="tabbtn" data-tab="blagues" onclick="openTab('blagues')">ğŸ˜‚ Blagues</button>
  </div>

  <!-- HUB -->
  <section id="hub" class="section active">
    <div class="grid">
      <div class="card">
        <h2>ğŸš€ Le plan</h2>
        <div class="small">
          Tâ€™es en cours, ton Ã¢me se dÃ©connecteâ€¦ et lÃ  tu cliques ici comme un agent secret du fun ğŸ•¶ï¸.<br>
          Conseil PNJ : si un prof arrive, passe en discret et dis â€œje consulte la docâ€ ğŸ˜‡.
        </div>
        <div class="out">
          ğŸ”¥ Raccourcis: <b>Jeux</b> â†’ mini morpion / clicker / dodge â€¢ <b>Bingo</b> â†’ cases Ã  cocher â€¢ <b>Quiz</b> â†’ 5 questions express.
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“ˆ Niveau dâ€™ennui</h2>
        <div class="small">Plus câ€™est haut, plus tu mÃ©rites une mÃ©daille en carton ğŸ…</div>
        <button class="action alt" onclick="ennuiPlus()">+ Ennui</button>
        <button class="action alt3" onclick="ennuiMoins()">- Ennui</button>
        <div id="ennui" class="out">Niveau : 0</div>
      </div>
    </div>

    <div class="card">
      <h2>ğŸ”— Liens (Ã  toi de remplir)</h2>
      <div class="small">Tu peux coller ici tes liens de quiz/jeux â€œsafeâ€ (pas de trucs chelous, on reste clean ğŸ˜‡).</div>
      <ul class="small">
        <li>Exemple : un quiz de classe, un formulaire, un doc, etc.</li>
        <li><a href="#" onclick="alert('Tu peux modifier cette liste directement dans le HTML ğŸ˜‰'); return false;">Astuce : clique puis modifie dans index.html</a></li>
      </ul>
    </div>
  </section>

  <!-- JEUX -->
  <section id="games" class="section">
    <div class="grid">
      <div class="card">
        <h2>âŒâ­• Morpion</h2>
        <div class="small">But : gagner vite, comme si tu volais un goÃ»ter sans te faire cramer ğŸª</div>
        <button class="action alt3" onclick="tttReset()">Rejouer</button>
        <div class="ttt" id="tttBoard"></div>
        <div class="out" id="tttStatus">Ã€ toi : X</div>
      </div>

      <div class="card">
        <h2>ğŸ’¥ Clicker â€œanti-ennuiâ€</h2>
        <div class="small">Clique, gagne des points, deviens un dieu du fond de classe ğŸ˜ˆ</div>
        <button class="action" onclick="clickerHit()">CLIC ğŸ’¸</button>
        <button class="action alt2" onclick="clickerReset()">Reset</button>
        <div class="out" id="clickerOut">Score : 0 â€¢ Multiplicateur : x1</div>
        <div class="small spacer"></div>
        <button class="action alt" onclick="buyMultiplier()">Acheter x2 (coÃ»t 20)</button>
        <div class="small">Astuce : spam pas trop fort sinon le prof entend le â€œclicliclicâ€ dans lâ€™univers parallÃ¨le.</div>
      </div>

      <div class="card" style="grid-column:1/-1">
        <h2>ğŸ•¹ï¸ Mini jeu â€œDodgeâ€ (clavier)</h2>
        <div class="small">
          DÃ©place le carrÃ© avec <b>â† â†‘ â†“ â†’</b>, Ã©vite les obstacles.  
          Si tu perds, câ€™est pas toi, câ€™est le destin (et un peu toi) ğŸ˜­
        </div>
        <div class="row">
          <button class="action alt3" onclick="dodgeStart()">Start</button>
          <button class="action alt2" onclick="dodgeStop()">Stop</button>
          <div class="pill" id="dodgeInfo">Score : 0</div>
        </div>
        <div class="spacer"></div>
        <canvas id="dodge" width="820" height="260" aria-label="Mini jeu Dodge"></canvas>
      </div>
    </div>
  </section>

  <!-- DEFIS -->
  <section id="defis" class="section">
    <div class="grid">
      <div class="card">
        <h2>ğŸ¯ DÃ©fi express</h2>
        <div class="small">Ã€ faire en 30 secondes, en mode ninja du CDI ğŸ¥·</div>
        <button class="action" onclick="nouveauDefi()">Nouveau dÃ©fi</button>
        <div id="defi" class="out">Clique et deviens une lÃ©gende.</div>
      </div>

      <div class="card">
        <h2>ğŸ“Œ DÃ©fi â€œclasseâ€</h2>
        <div class="small">Version soft, pas de chaos, on est pas au GTA des cahiers ğŸ˜‡</div>
        <button class="action alt3" onclick="defiClasse()">DÃ©fi classe</button>
        <div id="defi2" class="out">Clique pour un dÃ©fi â€œacceptableâ€.</div>
      </div>
    </div>
  </section>

  <!-- BINGO -->
  <section id="bingo" class="section">
    <div class="card">
      <h2>ğŸ§¾ Bingo du prof</h2>
      <div class="small">
        Clique une case quand Ã§a arrive. Objectif : 3 cases â†’ â€œvictoire moraleâ€ ğŸ†  
        (Ne montre pas Ã§a au prof. Ou alors assume ton destin ğŸ˜ˆ)
      </div>
      <button class="action alt3" onclick="bingoGenerate()">Nouveau bingo</button>
      <button class="action alt2" onclick="bingoClear()">Tout dÃ©cocher</button>
      <div class="bingo" id="bingoGrid"></div>
      <div class="out" id="bingoStatus">Cases cochÃ©es : 0</div>
    </div>
  </section>

  <!-- QUIZ -->
  <section id="quiz" class="section">
    <div class="grid">
      <div class="card">
        <h2>ğŸ§  Quiz rapide (5 questions)</h2>
        <div class="small">Tu rÃ©ponds, je te juge comme un PNJ marchand (avec amourâ€¦ enfinâ€¦ faÃ§on Marco ğŸ˜Œ)</div>
        <button class="action alt3" onclick="quizStart()">Lancer le quiz</button>
        <div class="out" id="quizOut">Appuie sur â€œLancerâ€.</div>
        <div class="row" id="quizChoices"></div>
      </div>

      <div class="card">
        <h2>ğŸ§  Petit bonus cerveau</h2>
        <div class="small">Respire 10 secondes. Oui. LÃ . Maintenant. (sinon je tâ€™envoie un canard te juger ğŸ¦†)</div>
        <button class="action alt" onclick="breath()">Respiration guidÃ©e</button>
        <div class="out" id="breathOut">â€¦</div>
      </div>
    </div>
  </section>

  <!-- BLAGUES -->
  <section id="blagues" class="section">
    <div class="grid">
      <div class="card">
        <h2>ğŸ˜‚ Blague â€œsafeâ€</h2>
        <div class="small">Promis : pas de blagues interdites. Juste du cringe de compÃ©tition ğŸ¤</div>
        <button class="action alt3" onclick="nouvelleBlague()">Nouvelle blague</button>
        <div id="blague" class="out">Clique pour un mini rire discret :)</div>
      </div>

      <div class="card">
        <h2>ğŸ’€ Blague un peu plus noire (mais pas sale)</h2>
        <div class="small">Humour sombre = lampe Ã©teinte, mais on reste gentils ğŸ˜ˆ</div>
        <button class="action alt" onclick="blagueNoire()">Go</button>
        <div id="blague2" class="out">Cliqueâ€¦ si tâ€™oses.</div>
      </div>
    </div>
  </section>

  <div class="card small">
    âš ï¸ RÃ¨gle â€œcavale mais cleanâ€ : pas de harcÃ¨lement, pas de doxx, pas de trucs bizarres.  
    Juste un QG anti-ennui pour survivre aux cours du turfu ğŸ˜‡
  </div>
</main>

<script>
  /* Tabs */
  function openTab(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.tabbtn').forEach(b=>b.classList.remove('active'));
    document.querySelector(`.tabbtn[data-tab="${id}"]`).classList.add('active');
  }

  /* Discret mode */
  let discret=false;
  function toggleDiscret(){
    discret=!discret;
    document.body.classList.toggle('discret', discret);
    document.getElementById('discretPill').textContent = discret ? "ğŸ˜‡ Discret : ON" : "ğŸ˜ˆ Discret : OFF";
  }

  /* Ennui */
  let ennui=0;
  function updateEnnui(){ document.getElementById('ennui').textContent="Niveau : "+ennui; }
  function ennuiPlus(){ ennui++; updateEnnui(); }
  function ennuiMoins(){ ennui=Math.max(0,ennui-1); updateEnnui(); }
  updateEnnui();

  /* DÃ©fis */
  const defis=[
    "Ã‰cris un mot random sur ton cahier et fais genre c'est un plan d'Ã©tude.",
    "Dessine un canard mini-mini dans un coin. ğŸ¦†",
    "Trouve 3 mots qui riment avec 'stylo'.",
    "Regarde lâ€™horloge 2 secondes puis soupire comme un perso dramatique.",
    "Fais un origami ultra discret (niveau ninja).",
    "Objectif : ne pas rire pendant 1 minute. (bonne chance)"
  ];
  const defisClasse=[
    "Note 3 mots clÃ©s du cours (oui oui, câ€™est sÃ©rieuxâ€¦ mais Ã§a reste un dÃ©fi).",
    "Ã‰cris une question intelligente Ã  poser (mÃªme si tu la poses jamais).",
    "Fais un mini rÃ©sumÃ© en 1 phrase. (tâ€™as le droit dâ€™inventerâ€¦ non je rigole ğŸ˜‡)",
    "Trouve un exemple concret du cours dans la vraie vie (genre 'Ã§a sert Ã  quoi').",
    "RÃ©Ã©cris le titre du chapitre en version 'film Netflix'."
  ];
  function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function nouveauDefi(){ document.getElementById('defi').textContent=pick(defis); }
  function defiClasse(){ document.getElementById('defi2').textContent=pick(defisClasse); }

  /* Blagues */
  const blagues=[
    "Pourquoi le cahier est triste ? Parce quâ€™il a trop de pages Ã  tourner.",
    "Le prof : 'Câ€™est clair ?' â€” Moi : 'Comme une vitre en cours de techno.'",
    "Mon cerveau en cours : 'chargementâ€¦ 1%â€¦ erreur 404 motivation'.",
    "Jâ€™ai rÃ©visÃ©â€¦ dans un univers parallÃ¨le.",
    "Mon stylo voulait Ãªtre discretâ€¦ puis il a fait du beatbox."
  ];
  const blaguesNoires=[
    "Je suis pas en retardâ€¦ je suis juste en avance sur le prochain cours.",
    "Mon attention en cours est partieâ€¦ paix Ã  son Ã¢me.",
    "Jâ€™ai ouvert mon cahier : câ€™Ã©tait un documentaire sur le vide."
  ];
  function nouvelleBlague(){ document.getElementById('blague').textContent=pick(blagues); }
  function blagueNoire(){ document.getElementById('blague2').textContent=pick(blaguesNoires); }

  /* ----------- JEUX ----------- */

  /* Morpion */
  let tttBoard = Array(9).fill("");
  let tttTurn = "X";
  let tttOver = false;

  function renderTTT(){
    const el = document.getElementById('tttBoard');
    el.innerHTML="";
    tttBoard.forEach((v,i)=>{
      const c=document.createElement('div');
      c.className="cell";
      c.textContent=v || "";
      c.onclick=()=>tttPlay(i);
      el.appendChild(c);
    });
  }
  function tttStatus(msg){ document.getElementById('tttStatus').textContent=msg; }

  function tttCheckWin(b){
    const lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    for(const [a,c,d] of lines){
      if(b[a] && b[a]===b[c] && b[a]===b[d]) return b[a];
    }
    return b.includes("") ? null : "draw";
  }
  function tttPlay(i){
    if(tttOver || tttBoard[i]) return;
    tttBoard[i]=tttTurn;
    const res=tttCheckWin(tttBoard);
    if(res==="draw"){ tttOver=true; tttStatus("Ã‰galitÃ©. Personne ne gagne. Comme la vie ğŸ˜­"); }
    else if(res){ tttOver=true; tttStatus("Victoire de "+res+" ğŸ†"); }
    else{
      tttTurn = (tttTurn==="X") ? "O" : "X";
      tttStatus("Ã€ toi : "+tttTurn);
    }
    renderTTT();
  }
  function tttReset(){
    tttBoard=Array(9).fill("");
    tttTurn="X";
    tttOver=false;
    tttStatus("Ã€ toi : X");
    renderTTT();
  }
  renderTTT();

  /* Clicker */
  let clickScore=0;
  let clickMul=1;
  function clickerOut(){
    document.getElementById('clickerOut').textContent = `Score : ${clickScore} â€¢ Multiplicateur : x${clickMul}`;
  }
  function clickerHit(){ clickScore += clickMul; clickerOut(); }
  function clickerReset(){ clickScore=0; clickMul=1; clickerOut(); }
  function buyMultiplier(){
    const cost = 20 * clickMul;
    if(clickScore >= cost){
      clickScore -= cost;
      clickMul *= 2;
      clickerOut();
    }else{
      document.getElementById('clickerOut').textContent = `Pas assez ğŸ˜­ â€¢ Il te faut ${cost} (tâ€™as ${clickScore})`;
      setTimeout(clickerOut, 900);
    }
  }
  clickerOut();

  /* Dodge (canvas) */
  const canvas = document.getElementById('dodge');
  const ctx = canvas.getContext('2d');
  let dodgeRunning=false;
  let dodgeScore=0;
  let keys={ArrowLeft:false,ArrowRight:false,ArrowUp:false,ArrowDown:false};

  let player={x:40,y:120,w:18,h:18,s:4};
  let obstacles=[]; // {x,y,w,h,vx}
  let lastSpawn=0;

  function dodgeReset(){
    dodgeScore=0;
    player={x:40,y:canvas.height/2,w:18,h:18,s:4};
    obstacles=[];
    lastSpawn=0;
    document.getElementById('dodgeInfo').textContent="Score : 0";
  }
  function spawnObstacle(){
    const h = 14 + Math.random()*40;
    const y = Math.random()*(canvas.height-h);
    const w = 12 + Math.random()*28;
    const vx = 3 + Math.random()*3;
    obstacles.push({x:canvas.width+20,y,w,h,vx});
  }
  function rectHit(a,b){
    return a.x < b.x+b.w && a.x+a.w > b.x && a.y < b.y+b.h && a.y+a.h > b.y;
  }
  function dodgeStep(ts){
    if(!dodgeRunning) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // move player
    if(keys.ArrowLeft) player.x -= player.s;
    if(keys.ArrowRight) player.x += player.s;
    if(keys.ArrowUp) player.y -= player.s;
    if(keys.ArrowDown) player.y += player.s;
    player.x = Math.max(0, Math.min(canvas.width-player.w, player.x));
    player.y = Math.max(0, Math.min(canvas.height-player.h, player.y));

    // spawn
    if(!lastSpawn || ts-lastSpawn > (650 - Math.min(450, dodgeScore*6))){
      spawnObstacle();
      lastSpawn=ts;
    }

    // update obstacles
    for(const o of obstacles){ o.x -= o.vx; }
    obstacles = obstacles.filter(o=>o.x+o.w > -20);

    // draw
    ctx.fillStyle="rgba(255,255,255,.85)";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    ctx.fillStyle="rgba(244,114,182,.9)";
    for(const o of obstacles){ ctx.fillRect(o.x,o.y,o.w,o.h); }

    // score & collisions
    dodgeScore++;
    document.getElementById('dodgeInfo').textContent="Score : "+Math.floor(dodgeScore/10);

    for(const o of obstacles){
      if(rectHit(player,o)){
        dodgeRunning=false;
        document.getElementById('dodgeInfo').textContent="ğŸ’€ Perdu. Score : "+Math.floor(dodgeScore/10);
        return;
      }
    }

    requestAnimationFrame(dodgeStep);
  }
  function dodgeStart(){
    dodgeReset();
    dodgeRunning=true;
    requestAnimationFrame(dodgeStep);
  }
  function dodgeStop(){ dodgeRunning=false; }

  window.addEventListener('keydown', (e)=>{
    if(keys.hasOwnProperty(e.key)) keys[e.key]=true;
  });
  window.addEventListener('keyup', (e)=>{
    if(keys.hasOwnProperty(e.key)) keys[e.key]=false;
  });

  // initial draw
  dodgeReset();
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="rgba(255,255,255,.85)";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  /* Bingo */
  const bingoPhrases=[
    "â€œOn se calme.â€",
    "â€œCâ€™est notÃ© ?â€",
    "Quelquâ€™un demande â€œcâ€™est pour une note ?â€",
    "Le prof dit â€œen silenceâ€ (mais Ã§a parle)",
    "â€œOn a pas le temps.â€",
    "Un stylo tombe (BOUM)",
    "â€œJe vous laisse 2 minutes.â€ (mensonge)",
    "â€œJe rÃ©pÃ¨te pas.â€",
    "Le prof menace dâ€™interro surprise ğŸ˜­",
    "â€œJe ramasse.â€ panique gÃ©nÃ©rale"
  ];
  let bingoCells=[];
  function bingoGenerate(){
    const shuffled=[...bingoPhrases].sort(()=>Math.random()-0.5).slice(0,9);
    bingoCells = shuffled.map(t=>({t,done:false}));
    renderBingo();
  }
  function renderBingo(){
    const grid=document.getElementById('bingoGrid');
    grid.innerHTML="";
    bingoCells.forEach((c,i)=>{
      const div=document.createElement('div');
      div.className="bcell"+(c.done?" done":"");
      div.textContent=c.t;
      div.onclick=()=>{ c.done=!c.done; renderBingo(); };
      grid.appendChild(div);
    });
    const done=bingoCells.filter(x=>x.done).length;
    document.getElementById('bingoStatus').textContent="Cases cochÃ©es : "+done+(done>=3 ? " âœ… (victoire morale)" : "");
  }
  function bingoClear(){
    bingoCells.forEach(c=>c.done=false);
    renderBingo();
  }
  bingoGenerate();

  /* Quiz */
  const quizBank=[
    {q:"Quel est lâ€™objectif dâ€™un rÃ©sumÃ© ?", a:["Raconter sa vie","Dire lâ€™essentiel","Ã‰crire plus long"], ok:1},
    {q:"Dans un calcul, la prioritÃ© passe dâ€™abord parâ€¦", a:["Les parenthÃ¨ses","Les additions","Le hasard"], ok:0},
    {q:"Une source fiable, câ€™est plutÃ´tâ€¦", a:["â€œTkt jâ€™ai vu sur TikTokâ€","Un manuel / site officiel","Le cousin du voisin"], ok:1},
    {q:"Quand tu comprends pas, la meilleure option câ€™estâ€¦", a:["Demander une explication","Souffrir en silence","Fuir en Mongolie"], ok:0},
    {q:"Un bon titre de fiche doit Ãªtreâ€¦", a:["Clair et court","Long comme un roman","Ã‰crit en hiÃ©roglyphes"], ok:0},
    {q:"Pour mÃ©moriser, câ€™est utile deâ€¦", a:["Relire passivement","Se tester (questions)","Attendre un miracle"], ok:1},
  ];
  let quiz=[];
  let qi=0;
  let qscore=0;

  function quizStart(){
    quiz=[...quizBank].sort(()=>Math.random()-0.5).slice(0,5);
    qi=0; qscore=0;
    showQ();
  }
  function showQ(){
    const out=document.getElementById('quizOut');
    const choices=document.getElementById('quizChoices');
    const cur=quiz[qi];
    out.innerHTML = `<b>Q${qi+1}/5</b> â€” ${cur.q}<br><span class="small">Choisis une rÃ©ponse.</span>`;
    choices.innerHTML="";
    cur.a.forEach((txt,idx)=>{
      const b=document.createElement('button');
      b.className="action alt3";
      b.textContent=txt;
      b.onclick=()=>answer(idx);
      choices.appendChild(b);
    });
  }
  function answer(idx){
    const cur=quiz[qi];
    const out=document.getElementById('quizOut');
    if(idx===cur.ok){ qscore++; out.innerHTML = `âœ… Bien jouÃ©. Score : ${qscore}/${qi+1}`; }
    else{ out.innerHTML = `âŒ Nope. Score : ${qscore}/${qi+1}`; }
    qi++;
    document.getElementById('quizChoices').innerHTML="";
    if(qi>=5){
      setTimeout(()=>{
        const verdict = (qscore>=4) ? "ğŸ Machine de guerre." :
                        (qscore>=2) ? "ğŸ˜ Correct, tu survis." :
                        "ğŸ’€ Tâ€™es en mode Ã©cran noir, faut un cafÃ© (ou un canard).";
        out.innerHTML = `<b>TerminÃ©</b> â€” Score : ${qscore}/5<br>${verdict}`;
      }, 600);
    }else{
      setTimeout(showQ, 650);
    }
  }

  /* Breath */
  function breath(){
    const el=document.getElementById('breathOut');
    let t=10;
    el.textContent="Inspireâ€¦ 4s";
    setTimeout(()=>el.textContent="Expireâ€¦ 6s", 420);
    const timer=setInterval(()=>{
      t--;
      if(t<=0){
        clearInterval(timer);
        el.textContent="âœ… VoilÃ . Ton cerveau a reboot (un peu).";
      }
    }, 1000);
  }
</script>
</body>
</html>
